<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FTSE 250 Value & Quality Screener</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Link to your external CSS file -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="pt-8">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-7xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-white">FTSE 250 Value Stock Screener</h1>
            <p class="text-gray-400 mt-2">An interactive tool for identifying potentially undervalued quality companies from the FTSE 250 index.</p>
        </header>

        <main>
            <!-- Criteria Selection Card -->
            <div class="card p-6 rounded-xl shadow-lg mb-8">
                <h2 class="text-xl font-semibold mb-4 border-b border-gray-600 pb-2 text-white">Screening Criteria</h2>
                <div class="flex flex-col gap-8">
                    <div>
                        <label class="block text-sm font-medium text-gray-400">Sectors</label>
                        <div class="sector-dropdown mt-1">
                            <div id="sector-select-box" class="form-input sector-select-box">
                                <span id="sector-select-text">Select sectors...</span>
                                <span>&#9662;</span>
                            </div>
                            <div id="sector-checkboxes" class="hidden sector-checkboxes">
                            </div>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">Filter by one or more industry sectors. Leave blank to include all.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                        <div>
                            <label for="pe-ratio" class="block text-sm font-medium text-gray-400">Max P/E Ratio</label>
                            <input type="number" id="pe-ratio" value="20" class="form-input mt-1 block w-full rounded-md shadow-sm sm:text-sm p-2">
                            <p class="text-xs text-gray-500 mt-2">The market average is often 15-20.</p>
                        </div>
                        <div>
                            <label for="pb-ratio" class="block text-sm font-medium text-gray-400">Max P/B Ratio</label>
                            <input type="number" id="pb-ratio" value="1.5" step="0.1" class="form-input mt-1 block w-full rounded-md shadow-sm sm:text-sm p-2">
                            <p class="text-xs text-gray-500 mt-2">Under 1 is a classic value signal.</p>
                        </div>
                        <div>
                            <label for="de-ratio" class="block text-sm font-medium text-gray-400">Max Debt/Equity (%)</label>
                            <input type="number" id="de-ratio" value="50" class="form-input mt-1 block w-full rounded-md shadow-sm sm:text-sm p-2">
                             <p class="text-xs text-gray-500 mt-2">Under 50% suggests a healthy balance sheet.</p>
                        </div>
                        <div>
                            <label for="roe" class="block text-sm font-medium text-gray-400">Min Return on Equity (%)</label>
                            <input type="number" id="roe" value="15" class="form-input mt-1 block w-full rounded-md shadow-sm sm:text-sm p-2">
                            <p class="text-xs text-gray-500 mt-2">Above 15% often indicates a high-quality business.</p>
                        </div>
                    </div>
                </div>
                <div class="mt-8 text-center flex justify-center items-center space-x-4">
                    <button id="run-screener" class="action-button py-2 px-6 rounded-lg shadow-md transition duration-150 ease-in-out" disabled>
                        <span id="run-screener-text">Loading Python...</span>
                    </button>
                    <button id="export-csv" class="hidden secondary-button py-2 px-6 rounded-lg shadow-md transition duration-150 ease-in-out">
                        Export as CSV
                    </button>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results-container" class="card p-6 rounded-xl shadow-lg min-h-[300px] flex items-center justify-center">
                <div id="initial-message" class="text-center text-gray-500">
                    <p>Adjust your criteria above and click "Run Screener" to begin.</p>
                </div>
                <div id="loader" class="hidden text-center">
                    <div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-600 h-12 w-12 mx-auto mb-4"></div>
                    <p class="text-gray-400 font-medium">Screening all 250 companies...</p>
                </div>
                <div id="results-output" class="hidden w-full">
                    <p id="results-summary" class="text-lg font-semibold mb-4 text-white"></p>
                    <div class="overflow-x-auto max-h-[500px]">
                        <table class="min-w-full divide-y divide-gray-600">
                            <thead class="table-header sticky top-0">
                                <tr>
                                    <th data-sort-key="ticker" class="sortable-header px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        <div class="flex items-center"><span>Ticker</span><span class="ml-2"></span></div>
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Company Name</th>
                                    <th data-sort-key="pe" class="sortable-header px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        <div class="flex items-center justify-end"><span>P/E Ratio</span><span class="ml-2"></span></div>
                                    </th>
                                    <th data-sort-key="pb" class="sortable-header px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        <div class="flex items-center justify-end"><span>P/B Ratio</span><span class="ml-2"></span></div>
                                    </th>
                                    <th data-sort-key="de" class="sortable-header px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        <div class="flex items-center justify-end"><span>Debt/Equity (%)</span><span class="ml-2"></span></div>
                                    </th>
                                    <th data-sort-key="roe" class="sortable-header px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        <div class="flex items-center justify-end"><span>ROE (%)</span><span class="ml-2"></span></div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="results-table-body" class="divide-y divide-gray-600">
                            </tbody>
                        </table>
                    </div>
                     <p class="text-xs text-gray-500 mt-4 text-center">
                        <strong>Disclaimer:</strong> This tool uses a consistent, simulated dataset to demonstrate the screening logic. Data simulation last updated on 25th September 2025.
                    </p>
                </div>
            </div>

            <!-- Chart Section -->
            <div id="chart-container" class="hidden card p-6 rounded-xl shadow-lg mt-8">
                 <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-4 gap-4 sm:gap-0">
                    <h2 class="text-xl font-semibold text-white">Graph results:</h2>
                    <div>
                        <label for="chart-metric" class="text-sm font-medium text-gray-400 mr-2">Chart Metric:</label>
                        <select id="chart-metric" class="form-select rounded-md shadow-sm sm:text-sm p-2">
                            <option value="pe">P/E Ratio</option>
                            <option value="pb">P/B Ratio</option>
                            <option value="de">Debt/Equity (%)</option>
                            <option value="roe" selected>ROE (%)</option>
                        </select>
                    </div>
                </div>
                <div id="python-chart-container" class="relative h-[400px] flex justify-center items-center">
                    <!-- Python-generated chart will be injected here -->
                </div>
            </div>

        </main>
    </div>
    
    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
</body>
</html>


